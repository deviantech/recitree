<div class="nested-fields form-inline">
  <div class="step">
    <% if f.object.persisted? %><%= f.input :position %><% end %>
    <%= f.input :action %>
    <%= f.input :notes %>
    <%= f.input :duration %>
    <%= f.input :duration_unit, collection: Step::UNITS, include_blank: false %> 
    <%= link_to_remove_association "remove step", f %>

    <div id="components">
      <%= f.simple_fields_for :components do |s| %>
        <%= render 'component_fields', f: s %>
      <% end %>
      <div class="links">
        <%= link_to_add_association 'add component', f, :components %>
      </div>
    </div>
  </div>
</div>